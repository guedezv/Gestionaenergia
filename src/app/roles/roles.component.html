<div class="layout">
  <!-- Header -->
  <app-header></app-header>

  <div class="layout-main">
    <!-- Sidebar -->
    <div class="sidebar-container">
      <app-sidebar></app-sidebar>
    </div>

    <!-- Contenido -->
    <div class="container mt-4 roles">
      <h2>Roles</h2>

      <!-- Mensajes -->
      <div *ngIf="loading" class="alert alert-info">Cargando…</div>
      <div *ngIf="!loading && error" class="alert alert-danger">{{ error }}</div>

      <!-- Encabezado visual + separador -->
      <div class="header-row">
        <span class="col-left">Nombres</span>
        <span class="col-right">Acciones</span>
      </div>
      <hr class="separator" />

      <!-- Tabla (chip list) -->
      <table class="table table-clean" *ngIf="!loading">
        <tbody>
          <tr *ngFor="let rol of rolesPaginados; let i = index" [class.alt]="i % 2 === 0">
            <td class="col-nombre">
              <div class="row-chip">
                {{ rol.Nombre }}

                <div class="actions">
                  <button class="btn btn-sm btn-edit" (click)="editarRol(rol)">Editar</button>
                  <button class="btn btn-sm btn-delete" (click)="eliminarRol(rol)">Eliminar</button>
                </div>
              </div>
            </td>
          </tr>

          <tr *ngIf="!rolesPaginados?.length">
            <td class="empty">No hay roles para mostrar.</td>
          </tr>
        </tbody>
      </table>

      <!-- Paginación -->
      <nav *ngIf="!loading && totalPaginas > 1" class="paginacion">
        <ul class="pagination">
          <li class="page-item" [class.disabled]="paginaActual === 1">
            <button class="page-link" (click)="cambiarPagina(paginaActual - 1)">&lt;</button>
          </li>

          <li
            class="page-item"
            *ngFor="let _ of [].constructor(totalPaginas); let i = index"
            [class.active]="paginaActual === (i + 1)">
            <button class="page-link" (click)="cambiarPagina(i + 1)">{{ i + 1 }}</button>
          </li>

          <li class="page-item" [class.disabled]="paginaActual === totalPaginas">
            <button class="page-link" (click)="cambiarPagina(paginaActual + 1)">&gt;</button>
          </li>
        </ul>
      </nav>

      <!-- Botones finales -->
      <div class="bottom-actions">
        <button class="btn btn-primary btn-create" (click)="crearNuevoRol()">Crear nuevo</button>
        <button class="btn btn-secondary" (click)="volver()">Volver</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <app-footer></app-footer>
</div>
